"use strict";var appVue=new Vue({el:".app-vue",data:{searchResults:[],posts:[],singlePost:[],search:"",showSearch:!1,searchClass:!0,loadCards:!1,imdbApi:"http://www.omdbapi.com/?apikey=ed5d8acc&",wpApi:"http://marcoaring.com.br/clientes/pss/wp-json/wp/v2/",user:window.currentUser,wpAjax:window.linkAjax},created:function(){this.loadPosts(),this.loadPostSingle()},methods:{loadSearch:function(s){var a=this;this.search=s.target.value,2<=this.search.length?$.ajax({url:a.imdbApi+"s="+this.search,success:function(s){a.searchResults=s}}):a.searchResults=[]},loadPosts:function(){var t=this;$.ajax({url:t.wpApi+"entretenimento?author="+t.user,success:function(s){var e="";$.each(s,function(s,a){e=a.acf.id_imdb,$.ajax({url:t.imdbApi+"i="+e,success:function(s){t.posts.push(s)}})})}})},loadPostSingle:function(){var a=this,s=this.getUrlParameter("id");s?$.ajax({url:a.imdbApi+"i="+s,success:function(s){a.singlePost=s}}):console.log("deu ruim")},loadSeason:function(s,a){if(s&&a){var e=$("#season"+a+" ul");$.ajax({url:this.imdbApi+"i="+s+"&Season="+a,beforeSend:function(){e.append("<span class='loader'></span>")},success:function(s){e.html(""),$(".loader").remove(),$.each(s.Episodes,function(s,a){e.append("<li class='main-episodes__item'><p class='main-episodes__name'>"+a.Title+"</p><a href='' class='main-episodes__link'><i class='small material-icons'>check</i></a></li>")}),$("html, body").stop().animate({scrollTop:$("#season"+a).parent().offset().top-55},1e3)}})}else console.log("deu ruim")},addItem:function(s){var a=this;$.ajax({url:a.wpAjax,type:"POST",data:{action:"save_item",imdbId:s,author:a.user},success:function(s){s&&(a.showSearch=!1,a.searchClass=!0,a.loadCards=!0,M.toast({html:"Item cadastrado na Biblioteca.",diplayLength:6e3,classes:"rounded"}))}})},getUrlParameter:function(s){var a=decodeURIComponent(window.location.search.substring(1)).split("&"),e=void 0,t=void 0;for(t=0;t<a.length;t++)return(e=a[t].split("="))[0]===s&&(void 0===e[1]||e[1])}},watch:{loadCards:function(){this.loadPosts(),this.loadCards=!1}}});$(document).on("click",".main-accordion__link",function(){return $(this).parent().hasClass("main-accordion__content--active")?$(this).parent().removeClass("main-accordion__content--active"):($(".main-accordion__content").removeClass("main-accordion__content--active"),$(this).parent().addClass("main-accordion__content--active")),!1});