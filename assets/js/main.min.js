"use strict";var appVue=new Vue({el:".app-vue",data:{searchResults:[],posts:[],singlePost:[],episodes:[],search:"",showSearch:!1,searchClass:!0,loadCards:!1,imdbApi:"http://www.omdbapi.com/?apikey=ed5d8acc&",wpApi:"http://marcoaring.com.br/clientes/pss/wp-json/wp/v2/",user:window.currentUser,wpAjax:window.linkAjax},created:function(){this.loadPosts(),this.loadPostSingle()},methods:{loadSearch:function(s){var e=this;this.search=s.target.value,2<=this.search.length?$.ajax({url:e.imdbApi+"s="+this.search,success:function(s){e.searchResults=s}}):e.searchResults=[]},loadPosts:function(){var i=this;$.ajax({url:i.wpApi+"entretenimento?author="+i.user,success:function(s){var a="";$.each(s,function(s,e){a=e.acf.id_imdb,$.ajax({url:i.imdbApi+"i="+a,success:function(s){i.posts.push(s)}})})}})},loadPostSingle:function(){var e=this,s=this.getUrlParameter("id");s?$.ajax({url:e.imdbApi+"i="+s,success:function(s){e.singlePost=s}}):console.log("deu ruim")},loadSeason:function(s,e){if(s&&e){var a=this;$("#season"+e+" ul");$.ajax({url:a.imdbApi+"i="+s+"&Season="+e,success:function(s){a.episodes=[],a.episodes=s.Episodes,$.each(a.episodes,function(e,s){$.ajax({url:a.wpApi+"episodes/?filter[meta_key]=id_episode&filter[meta_value]="+s.imdbID,success:function(s){0<s.length?a.$set(a.episodes[e],"watched",!0):a.$set(a.episodes[e],"watched",!1)}})}),$("html, body").stop().animate({scrollTop:$("#season"+e).parent().offset().top-55},1e3)}})}else console.log("deu ruim")},checkEpisode:function(s,e,a,i){var t=this;$.ajax({url:t.wpAjax,type:"POST",data:{action:"save_episode",titulo:s,id_serie:i,id_episode:e,author:t.user},success:function(s){s&&(t.loadSeason(i,a),M.toast({html:"EpisÃ³dio marcado como assistido.",diplayLength:6e3,classes:"rounded"}))}})},getUrlParameter:function(s){var e=decodeURIComponent(window.location.search.substring(1)).split("&"),a=void 0,i=void 0;for(i=0;i<e.length;i++)return(a=e[i].split("="))[0]===s&&(void 0===a[1]||a[1])}},watch:{loadCards:function(){this.loadPosts(),this.loadCards=!1}}});$(document).on("click",".main-accordion__link",function(){return $(this).parent().hasClass("main-accordion__content--active")?$(this).parent().removeClass("main-accordion__content--active"):($(".main-accordion__content").removeClass("main-accordion__content--active"),$(this).parent().addClass("main-accordion__content--active")),!1});